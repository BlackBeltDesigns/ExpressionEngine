<script >
	var searchFieldCount = 1;

	function add_search_field(){
		if (document.getElementById('search_field_1')){
			// Find last search field
			var originalSearchField = document.getElementById('search_field_1');
			searchFieldCount++;

			// Clone it, change the id
			var newSearchField = originalSearchField.cloneNode(true);
			newSearchField.id = 'search_field_' + searchFieldCount;

			// Zero the input and change the names of fields
			var newFieldInputs = newSearchField.getElementsByTagName('input');
			newFieldInputs[0].value = '';
			newFieldInputs[0].name = 'search_keywords_' + searchFieldCount;

			var newFieldSelects = newSearchField.getElementsByTagName('select');
			newFieldSelects[0].name = 'search_field_' + searchFieldCount;

			// Append it and we're done
			originalSearchField.parentNode.appendChild(newSearchField);
		}
	}

	function delete_search_field(obj){
		if (obj.parentNode && obj.parentNode.id != 'search_field_1'){
			obj.parentNode.parentNode.removeChild(obj.parentNode)
		}
	}
</script>

<section class="row">
	<section class="w-12">
		<h1>{page_title}</h1>
		{form_declaration}
			<div class="table-sorting">
				<label>
					<b>{lang:show}</b>
					<select name="group_id">
						{group_id_options}
					</select>
				</label>
				<label>
					<b>{lang:sort}</b>
					<select name="order_by">
						{order_by_options}
					</select>
				</label>
				<label>
					<b>{lang:order}</b>
					<select name="sort_order">
						{sort_order_options}
					</select>
				</label>
				<label>
					<b>{lang:rows}</b>
					<select name="row_limit">
						{row_limit_options}
					</select>
				</label>
				<input class="btn" type="submit" value="{lang:submit}">
			</div>
			<table id="memberlist">
				<thead>
					<tr>
						<th>{lang:name}</th>
						<th>{lang:forum_posts}</th>
						<th>{lang:email_short}</th>
						<th>{lang:url}</th>
						<th>{lang:join_date}</th>
						<th>{lang:last_visit}</th>
					</tr>
				</thead>
				<tbody>
					{member_rows}
				</tbody>
			</table>
			{paginate}
				<div>
					<table>
						<tr>
							<td>{current_page} {lang:of} {total_pages}</td>
							{pagination_links}
						</tr>
					</table>
				</div>
			{/paginate}
		</form>
	</section>
	<section class="w-4">
		<div class="sidebar">
			<!-- <h2>{lang:member_search}</h2> -->
			<div class="search">
				{form:form_declaration:do_member_search}
					<div id="member_search_fields">
						<div id="search_field_1" class="search-wrap">
							<input type="text" name="search_keywords_1" placeholder="Type user, hit enter">
							<!-- <input type="hidden" name="search_field_1" value="screen_name"> -->
							<select name="search_field_1">
								<option value="screen_name">{lang:search_field}</option>
								<option value="screen_name">{lang:mbr_screen_name}</option>
								<option value="email">{lang:mbr_email_address}</option>
								<option value="url">{lang:mbr_url}</option>
								<option value="location">{lang:mbr_location}</option>
								{custom_profile_field_options}
							</select>
							<a href="#" onclick="add_search_field(); return false;">+</a>
							<a href="#" onclick="delete_search_field(this); return false;">-</a>
						</div>
					</div>
					<!-- <select name="search_group_id">
						{group_id_options}
					</select> -->
					<fieldset class="ctrls">
						<input type="submit" value="{lang:search}">
					</fieldset>
				</form>
			</div>
		</div>
	</section>
</section>